{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { fetchData, fetchNewUser, fetchRated } from './omdbAPI';\nconst initialState = {\n  userID: -1,\n  result: false,\n  predictions: false,\n  searchValue: '',\n  searchLoaded: false,\n  resultRatings: [],\n  rated: [],\n  status: 'idle'\n};\nexport const updateAsyncPredictions = createAsyncThunk('search/fetchPredictions', async data => {\n  const response = await fetchData(data);\n  return response.json();\n});\nexport const updateAsyncResult = createAsyncThunk('search/fetchResults', async data => {\n  const response = await fetchData(data);\n  return response.json();\n});\nexport const updateAsyncNewUser = createAsyncThunk('search/fetchNewUser', async data => {\n  const response = await fetchNewUser(data);\n  return response.json();\n});\nexport const updateAsyncRated = createAsyncThunk('search/fetchRated', async data => {\n  const response = await fetchRated(data);\n  return response.json();\n});\nexport const searchSlice = createSlice({\n  name: 'search',\n  initialState,\n  reducers: {\n    setUserID: (state, action) => {\n      state.userID = action.payload;\n    },\n    setSearchValue: (state, action) => {\n      state.searchValue = action.payload;\n    },\n    concatSearchValue: (state, action) => ({ ...state,\n      searchValue: state.searchValue.concat(action.payload)\n    }),\n    removeSearchValue: state => ({ ...state,\n      searchValue: state.searchValue.substring(0, state.searchValue.length > 0 ? state.searchValue.length - 1 : 0)\n    }),\n    setSearchLoaded: (state, action) => {\n      state.searchLoaded = action.payload;\n    },\n    clearSearchValue: state => {\n      state.searchValue = '';\n    },\n    clearPredictions: state => {\n      state.predictions = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(updateAsyncPredictions.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncPredictions.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.predictions = action.payload;\n    }).addCase(updateAsyncResult.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncResult.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.result = action.payload;\n      state.resultRatings = action.payload.Rating;\n    }).addCase(updateAsyncNewUser.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncNewUser.fulfilled, (state, action) => {\n      state.status = 'idle';\n      console.log('new user', action.payload.data);\n      state.userID = action.payload.data;\n      localStorage.setItem('userID', action.payload.data);\n    }).addCase(updateAsyncRated.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncRated.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.rated = action.payload;\n    });\n  }\n});\nexport const {\n  setSearchValue,\n  concatSearchValue,\n  setSearchLoaded,\n  clearSearchValue,\n  removeSearchValue,\n  clearPredictions,\n  setUserID\n} = searchSlice.actions;\nexport const selectResult = state => state.search.result;\nexport const selectPredictions = state => state.search.predictions;\nexport const selectSearchLoaded = state => state.search.searchLoaded;\nexport const selectSearchValue = state => state.search.searchValue;\nexport const selectResultRatings = state => state.search.resultRatings;\nexport const selectUserID = state => state.search.userID;\nexport const selectRated = state => state.search.rated;\nexport default searchSlice.reducer;","map":{"version":3,"sources":["/Users/winston/my-movie-list/src/components/searchSlice.js"],"names":["createAsyncThunk","createSlice","fetchData","fetchNewUser","fetchRated","initialState","userID","result","predictions","searchValue","searchLoaded","resultRatings","rated","status","updateAsyncPredictions","data","response","json","updateAsyncResult","updateAsyncNewUser","updateAsyncRated","searchSlice","name","reducers","setUserID","state","action","payload","setSearchValue","concatSearchValue","concat","removeSearchValue","substring","length","setSearchLoaded","clearSearchValue","clearPredictions","extraReducers","builder","addCase","pending","fulfilled","Rating","console","log","localStorage","setItem","actions","selectResult","search","selectPredictions","selectSearchLoaded","selectSearchValue","selectResultRatings","selectUserID","selectRated","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { fetchData, fetchNewUser, fetchRated } from './omdbAPI';\n\nconst initialState = {\n    userID: -1,\n    result: false,\n    predictions: false,\n    searchValue: '',\n    searchLoaded: false,\n    resultRatings: [],\n    rated: [],\n    status: 'idle'\n};\n\nexport const updateAsyncPredictions = createAsyncThunk(\n    'search/fetchPredictions',\n    async (data) => {\n        const response = await fetchData(data);\n        return response.json();\n    }\n);\n\nexport const updateAsyncResult = createAsyncThunk(\n    'search/fetchResults',\n    async (data) => {\n        const response = await fetchData(data);\n        return response.json();\n    }\n);\n\nexport const updateAsyncNewUser = createAsyncThunk(\n    'search/fetchNewUser',\n    async (data) => {\n        const response = await fetchNewUser(data);\n        return response.json();\n    }\n);\n\nexport const updateAsyncRated = createAsyncThunk(\n    'search/fetchRated',\n    async (data) => {\n        const response = await fetchRated(data);\n        return response.json();\n    }\n);\n\nexport const searchSlice = createSlice({\n    name: 'search',\n    initialState,\n    reducers: {\n        setUserID: (state, action) => {\n            state.userID = action.payload;\n        },\n        setSearchValue: (state, action) => {\n            state.searchValue = action.payload;\n        },\n        concatSearchValue: (state,action) => ({\n            ...state,\n            searchValue: state.searchValue.concat(action.payload)\n        }),\n        removeSearchValue: (state) => ({\n            ...state,\n            searchValue: state.searchValue.substring(0, state.searchValue.length > 0 ?\n                                                        state.searchValue.length-1 : 0)\n        }),\n        setSearchLoaded: (state, action) => {\n            state.searchLoaded = action.payload;\n        },\n        clearSearchValue: (state) => {\n            state.searchValue = '';\n        },\n        clearPredictions: (state) =>{\n            state.predictions = false;\n        }\n    },\n    extraReducers: (builder) => {\n      builder\n        .addCase(updateAsyncPredictions.pending, (state) => {\n          state.status = 'loading';\n        })\n        .addCase(updateAsyncPredictions.fulfilled, (state, action) => {\n          state.status = 'idle';\n          state.predictions = action.payload;\n        })\n        .addCase(updateAsyncResult.pending, (state) => {\n            state.status = 'loading';\n        })\n        .addCase(updateAsyncResult.fulfilled, (state, action) => {\n            state.status = 'idle';\n            state.result = action.payload;\n            state.resultRatings = action.payload.Rating;\n        })\n        .addCase(updateAsyncNewUser.pending, (state) => {\n            state.status = 'loading';\n        })\n        .addCase(updateAsyncNewUser.fulfilled, (state, action) => {\n            state.status = 'idle';\n            console.log('new user', action.payload.data);\n            state.userID = action.payload.data;\n            localStorage.setItem('userID', action.payload.data);\n        })\n        .addCase(updateAsyncRated.pending, (state) => {\n            state.status = 'loading';\n        })\n        .addCase(updateAsyncRated.fulfilled, (state, action) => {\n            state.status = 'idle';\n            state.rated = action.payload;\n        })\n    },\n  });\n\nexport const { setSearchValue,concatSearchValue, setSearchLoaded, clearSearchValue, removeSearchValue, clearPredictions, setUserID} = searchSlice.actions;\n\nexport const selectResult = (state) => state.search.result;\nexport const selectPredictions = (state) => state.search.predictions;\nexport const selectSearchLoaded = (state) => state.search.searchLoaded;\nexport const selectSearchValue = (state) => state.search.searchValue;\nexport const selectResultRatings = (state) => state.search.resultRatings;\nexport const selectUserID = (state) => state.search.userID;\nexport const selectRated = (state) => state.search.rated;\n\nexport default searchSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}