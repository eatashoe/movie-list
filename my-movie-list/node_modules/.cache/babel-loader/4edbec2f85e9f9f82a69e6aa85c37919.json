{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { fetchData, fetchRatingData, postData } from './omdbAPI';\nconst initialState = {\n  result: false,\n  predictions: false,\n  searchValue: '',\n  searchLoaded: false,\n  resultRatings: [],\n  status: 'idle'\n};\nexport const updateAsyncPredictions = createAsyncThunk('search/fetchData', async data => {\n  console.log('ye im fucked');\n  const response = await fetchData(data);\n  return response.json();\n});\nexport const updateAsyncResult = createAsyncThunk('search/fetchData2', async (data, _ref) => {\n  let {\n    dispatch\n  } = _ref;\n  const response = await fetchData(data);\n  return {\n    r: response.json(),\n    d: dispatch\n  };\n});\nexport const updateAsyncRatings = createAsyncThunk('search/fetchData3', async data => {\n  const response = await fetchRatingData(data);\n  console.log(\"FUCK U\", response);\n  return response.json();\n});\nexport const searchSlice = createSlice({\n  name: 'search',\n  initialState,\n  reducers: {\n    setSearchValue: (state, action) => {\n      state.searchValue = action.payload;\n    },\n    concatSearchValue: (state, action) => ({ ...state,\n      searchValue: state.searchValue.concat(action.payload)\n    }),\n    removeSearchValue: state => ({ ...state,\n      searchValue: state.searchValue.substring(0, state.searchValue.length > 0 ? state.searchValue.length - 1 : 0)\n    }),\n    setSearchLoaded: (state, action) => {\n      state.searchLoaded = action.payload;\n    },\n    clearSearchValue: state => {\n      state.searchValue = '';\n    },\n    clearPredictions: state => {\n      state.predictions = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(updateAsyncPredictions.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncPredictions.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.predictions = action.payload;\n    }).addCase(updateAsyncResult.pending, state => {\n      state.status = 'loading';\n    }).addCase(updateAsyncResult.fulfilled, (state, action) => {\n      state.status = 'idle';\n      state.result = action.payload;\n      state.resultRatings = [];\n    }).addCase(updateAsyncRatings.pending, state => {\n      state.status = 'loading';\n    }) // .addCase(updateAsyncRatings.fulfilled, (state, action) => ({\n    //     ...state,\n    //     resultRatings: state.resultRatings.concat(action.payload)\n    // }))\n    .addCase(updateAsyncRatings.fulfilled, (state, action) => {\n      state.resultRatings = action.payload;\n    });\n  }\n});\nexport const {\n  setSearchValue,\n  concatSearchValue,\n  setSearchLoaded,\n  clearSearchValue,\n  removeSearchValue,\n  clearPredictions\n} = searchSlice.actions;\nexport const selectResult = state => state.search.result;\nexport const selectPredictions = state => state.search.predictions;\nexport const selectSearchLoaded = state => state.search.searchLoaded;\nexport const selectSearchValue = state => state.search.searchValue;\nexport const selectResultRatings = state => state.search.resultRatings;\nexport default searchSlice.reducer;","map":{"version":3,"sources":["/Users/winston/my-movie-list/src/components/searchSlice.js"],"names":["createAsyncThunk","createSlice","fetchData","fetchRatingData","postData","initialState","result","predictions","searchValue","searchLoaded","resultRatings","status","updateAsyncPredictions","data","console","log","response","json","updateAsyncResult","dispatch","r","d","updateAsyncRatings","searchSlice","name","reducers","setSearchValue","state","action","payload","concatSearchValue","concat","removeSearchValue","substring","length","setSearchLoaded","clearSearchValue","clearPredictions","extraReducers","builder","addCase","pending","fulfilled","actions","selectResult","search","selectPredictions","selectSearchLoaded","selectSearchValue","selectResultRatings","reducer"],"mappings":"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","sourcesContent":["import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport { fetchData, fetchRatingData, postData } from './omdbAPI';\n\nconst initialState = {\n    result: false,\n    predictions: false,\n    searchValue: '',\n    searchLoaded: false,\n    resultRatings: [],\n    status: 'idle'\n};\n\nexport const updateAsyncPredictions = createAsyncThunk(\n    'search/fetchData',\n    async (data) => {\n        console.log('ye im fucked')\n        const response = await fetchData(data);\n        return response.json();\n    }\n);\n\nexport const updateAsyncResult = createAsyncThunk(\n    'search/fetchData2',\n    async (data,{dispatch}) => {\n        const response = await fetchData(data);\n        return {r: response.json(), d: dispatch};\n    }\n);\n\nexport const updateAsyncRatings = createAsyncThunk(\n    'search/fetchData3',\n    async (data) => {\n        const response = await fetchRatingData(data);\n        console.log(\"FUCK U\",response);\n        return response.json();\n    }\n);\n\nexport const searchSlice = createSlice({\n    name: 'search',\n    initialState,\n    reducers: {\n        setSearchValue: (state, action) => {\n            state.searchValue = action.payload;\n        },\n        concatSearchValue: (state,action) => ({\n            ...state,\n            searchValue: state.searchValue.concat(action.payload)\n        }),\n        removeSearchValue: (state) => ({\n            ...state,\n            searchValue: state.searchValue.substring(0, state.searchValue.length > 0 ?\n                                                        state.searchValue.length-1 : 0)\n        }),\n        setSearchLoaded: (state, action) => {\n            state.searchLoaded = action.payload;\n        },\n        clearSearchValue: (state) => {\n            state.searchValue = '';\n        },\n        clearPredictions: (state) =>{\n            state.predictions = false;\n        }\n    },\n    extraReducers: (builder) => {\n      builder\n        .addCase(updateAsyncPredictions.pending, (state) => {\n          state.status = 'loading';\n        })\n        .addCase(updateAsyncPredictions.fulfilled, (state, action) => {\n          state.status = 'idle';\n          state.predictions = action.payload;\n        })\n        .addCase(updateAsyncResult.pending, (state) => {\n            state.status = 'loading';\n        })\n        .addCase(updateAsyncResult.fulfilled, (state, action) => {\n            state.status = 'idle';\n            state.result = action.payload;\n            state.resultRatings = [];\n        })\n        .addCase(updateAsyncRatings.pending, (state) => {\n            state.status = 'loading';\n        })\n        // .addCase(updateAsyncRatings.fulfilled, (state, action) => ({\n        //     ...state,\n        //     resultRatings: state.resultRatings.concat(action.payload)\n        // }))\n        .addCase(updateAsyncRatings.fulfilled, (state, action) => {\n            state.resultRatings = action.payload;\n        })\n    },\n  });\n\nexport const { setSearchValue,concatSearchValue, setSearchLoaded, clearSearchValue, removeSearchValue, clearPredictions} = searchSlice.actions;\n\nexport const selectResult = (state) => state.search.result;\nexport const selectPredictions = (state) => state.search.predictions;\nexport const selectSearchLoaded = (state) => state.search.searchLoaded;\nexport const selectSearchValue = (state) => state.search.searchValue;\nexport const selectResultRatings = (state) => state.search.resultRatings;\n\nexport default searchSlice.reducer;\n"]},"metadata":{},"sourceType":"module"}